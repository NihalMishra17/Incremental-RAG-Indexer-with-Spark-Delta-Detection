delta-indexer {
  # Local default, overridden by environment variable for EMR
  input-dir = "test-corpus"
  input-dir = ${?INPUT_DIR}

  output-dir = "delta-output"
  output-dir = ${?OUTPUT_DIR}

  documents-table = "documents"
  chunks-table = "chunks"
  embeddings-table = "embeddings"
  index-table = "index"

  chunking {
    chunk-size = 1000
    overlap = 100
    version = "v1"
  }

  embedding {
    model = "mxbai-embed-large"
    version = "v1"
    batch-size = 32
    dimension = 1024

    # Local default, overridden for EMR
    ollama-host = "http://localhost:11434"
    ollama-host = ${?OLLAMA_HOST}
  }

  index {
    num-shards = 4
    publish-strategy = "incremental"
  }

  spark {
    app-name = "HW2-Delta-Indexer"

    # Local default, overridden for EMR
    master = "local[*]"
    master = ${?SPARK_MASTER}

    checkpoint-dir = "checkpoints"
    checkpoint-dir = ${?CHECKPOINT_DIR}
  }
}